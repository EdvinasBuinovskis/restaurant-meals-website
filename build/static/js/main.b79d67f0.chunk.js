(this["webpackJsonprestaurant-meals-website"]=this["webpackJsonprestaurant-meals-website"]||[]).push([[0],{139:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(24),s=a.n(c),i=(a(88),a(89),a(21)),o=a(17),d=a(6),l=a(5),j=a(75),u=a(74),b=a(1);function h(){return Object(b.jsxs)("div",{children:[Object(b.jsx)(u.a,{icon:j.a,spin:!0})," Loading..."]})}function p(e){return Object(b.jsx)("div",{className:"alert alert-".concat(e.variant||"info"),children:e.children})}var O=a(9);function m(e){var t=e.restaurant;return Object(b.jsx)(O.f,{children:Object(b.jsx)(i.b,{to:"/restaurants/".concat(t._id),children:Object(b.jsxs)(O.a,{style:{maxWidth:"22rem"},className:"h-100",children:[Object(b.jsxs)(O.p,{rippleColor:"light",rippleTag:"div",className:"bg-image hover-overlay",children:[Object(b.jsx)(O.d,{src:t.image,fluid:!0,alt:"Failed to load image :/",position:"top"}),Object(b.jsx)("a",{children:Object(b.jsx)("div",{className:"mask",style:{backgroundColor:"rgba(251, 251, 251, 0.15)"}})})]}),Object(b.jsx)(O.b,{children:Object(b.jsx)(O.e,{color:"black",children:t.name})})]})})},t._id)}var f=a(8),x=a.n(f),v=a(13),g=a(14),y=a.n(g),E="RESTAURANT_LIST_REQUEST",S="RESTAURANT_LIST_SUCCESS",k="RESTAURANT_LIST_FAIL",w="RESTAURANT_DETAILS_REQUEST",_="RESTAURANT_DETAILS_SUCCESS",A="RESTAURANT_DETAILS_FAIL",T="RESTAURANT_CREATE_REQUEST",R="RESTAURANT_CREATE_SUCCESS",C="RESTAURANT_CREATE_FAIL",I="RESTAURANT_CREATE_RESET",L="RESTAURANT_UPDATE_REQUEST",F="RESTAURANT_UPDATE_SUCCESS",U="RESTAURANT_UPDATE_FAIL",z="RESTAURANT_UPDATE_RESET",D="RESTAURANT_DELETE_REQUEST",N="RESTAURANT_DELETE_SUCCESS",P="RESTAURANT_DELETE_FAIL",B="RESTAURANT_DELETE_RESET",M=function(){return function(){var e=Object(v.a)(x.a.mark((function e(t){var a,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:E}),e.prev=1,e.next=4,y.a.get("/api/restaurants");case 4:a=e.sent,r=a.data,t({type:S,payload:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:k,payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},V=function(e){return function(){var t=Object(v.a)(x.a.mark((function t(a){var r,n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:w,payload:e}),t.prev=1,t.next=4,y.a.get("/api/restaurants/".concat(e));case 4:r=t.sent,n=r.data,a({type:_,payload:n}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),a({type:A,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()};function W(e){var t=e.searchTerm,a=e.setSearchTerm;return Object(b.jsx)(O.f,{md:"6",children:Object(b.jsxs)("form",{className:"form-inline mt-4 mb-4",children:[Object(b.jsx)(O.h,{icon:"search"}),Object(b.jsx)("input",{className:"form-control form-control-sm ml-3 w-75",type:"text",placeholder:"Paie\u0161ka","aria-label":"Search",value:t,onChange:function(e){return a(e.target.value)}})]})})}var q=a(77);function Q(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.restaurantList})),a=t.loading,n=t.error,c=t.restaurants,s=Object(l.c)((function(e){return e.userSignin})).userInfo,i=Object(r.useState)(""),o=Object(d.a)(i,2),j=o[0],u=o[1];return Object(r.useEffect)((function(){e(M())}),[e]),Object(b.jsx)("div",{children:a?Object(b.jsx)(h,{}):n?Object(b.jsx)(p,{variant:"danger",children:n}):Object(b.jsxs)("div",{children:[Object(b.jsx)(W,{searchTerm:j,setSearchTerm:u}),s?Object(b.jsx)("div",{children:s.isAdmin?Object(b.jsx)(q.a,{href:"/restaurants/add",children:"Add"}):Object(b.jsx)("div",{})}):Object(b.jsx)("div",{}),Object(b.jsx)(O.c,{children:Object(b.jsx)("div",{className:"row center",children:(""===j?c:c.filter((function(e){var t=e.name.toLowerCase(),a=j.toLowerCase();return t.includes(a)}))).map((function(e){return Object(b.jsx)(m,{restaurant:e},e._id)}))})})]})})}var G=a(145),H=a(146),J=a(147),K=a(144);function X(e){var t=e.meal;return Object(b.jsx)("div",{children:Object(b.jsxs)(K.a,{tag:"a",href:"/meals/".concat(t._id),action:!0,children:[t.name,t.approved?Object(b.jsx)(O.h,{className:"ms-1",icon:"check",size:"sm"}):Object(b.jsx)("div",{})]})},t._id)}var $="MEAL_LIST_REQUEST",Y="MEAL_LIST_SUCCESS",Z="MEAL_LIST_FAIL",ee="MEAL_DETAILS_REQUEST",te="MEAL_DETAILS_SUCCESS",ae="MEAL_DETAILS_FAIL",re="MEAL_CREATE_REQUEST",ne="MEAL_CREATE_SUCCESS",ce="MEAL_CREATE_FAIL",se="MEAL_CREATE_RESET",ie="MEAL_UPDATE_REQUEST",oe="MEAL_UPDATE_SUCCESS",de="MEAL_UPDATE_FAIL",le="MEAL_UPDATE_RESET",je="MEAL_DELETE_REQUEST",ue="MEAL_DELETE_SUCCESS",be="MEAL_DELETE_FAIL",he="MEAL_DELETE_RESET",pe="MEAL_APPROVE_REQUEST",Oe="MEAL_APPROVE_SUCCESS",me="MEAL_APPROVE_FAIL",fe=function(){return function(){var e=Object(v.a)(x.a.mark((function e(t){var a,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:$}),e.prev=1,e.next=4,y.a.get("/api/meals");case 4:a=e.sent,r=a.data,t({type:Y,payload:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:Z,payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},xe=function(e){return function(){var t=Object(v.a)(x.a.mark((function t(a){var r,n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:ee,payload:e}),t.prev=1,t.next=4,y.a.get("/api/meals/".concat(e));case 4:r=t.sent,n=r.data,a({type:te,payload:n}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),a({type:ae,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()};function ve(e){var t=Object(l.b)(),a=e.match.params.id,n=Object(l.c)((function(e){return e.restaurantDetails})),c=n.loading,s=n.error,i=n.restaurant,o=Object(l.c)((function(e){return e.mealList})),d=o.loading,j=o.error,u=o.meals,O=Object(l.c)((function(e){return e.userSignin})).userInfo,m=Object(l.c)((function(e){return e.restaurantDelete})).success;Object(r.useEffect)((function(){t(V(a)),t(fe())}),[t,a]),Object(r.useEffect)((function(){m&&e.history.push("/restaurants")}),[m]);var f=function(){window.confirm("Are you sure you want to delete?")&&t(function(e){return function(){var t=Object(v.a)(x.a.mark((function t(a,r){var n,c;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:D,payload:e}),n=r(),c=n.userSignin.userInfo,t.prev=2,t.next=5,y.a.delete("/api/restaurants/".concat(e),{headers:{Authorization:"Bearer ".concat(c.token)}});case 5:t.sent.data,a({type:N}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),a({type:P,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,a){return t.apply(this,arguments)}}()}(a))};return Object(b.jsx)("div",{children:c?Object(b.jsx)(h,{}):s?Object(b.jsx)(p,{variant:"danger",children:s}):Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{children:[O?Object(b.jsx)("div",{children:O.isAdmin?Object(b.jsxs)("div",{children:[Object(b.jsx)(q.a,{href:"/restaurants/".concat(i._id,"/edit"),children:"Edit"}),Object(b.jsx)(q.a,{onClick:function(){return f()},children:"Delete"})]}):Object(b.jsx)("div",{})}):Object(b.jsx)("div",{}),Object(b.jsx)(G.a,{fluid:!0,children:Object(b.jsxs)(H.a,{fluid:!0,children:[Object(b.jsx)("img",{top:!0,src:i.image,alt:"failed to load photo :/",style:{maxWidth:"22rem",maxHeight:"22rem"}}),Object(b.jsx)("h1",{className:"display-3",children:i.name}),Object(b.jsx)("p",{className:"lead",children:i.description})]})})]}),d?Object(b.jsx)(h,{}):j?Object(b.jsx)(p,{variant:"danger",children:s}):Object(b.jsx)("div",{children:Object(b.jsx)(J.a,{children:u.filter((function(e){return e.restaurant_id===i._id})).map((function(e){return Object(b.jsx)(X,{meal:e},e._id)}))})})]})})}var ge=a(148),ye=a(149),Ee=a(150),Se=a(151),ke=a(152);function we(e){var t=Object(r.useState)(""),a=Object(d.a)(t,2),n=a[0],c=a[1],s=Object(r.useState)(""),i=Object(d.a)(s,2),o=i[0],j=i[1],u=Object(r.useState)(""),O=Object(d.a)(u,2),m=O[0],f=O[1],g=Object(l.b)(),E=Object(l.c)((function(e){return e.restaurantCreate})),S=E.success,k=E.error,w=E.loading,_=Object(l.c)((function(e){return e.userSignin})).userInfo,A=Object(r.useState)(!1),I=Object(d.a)(A,2),L=I[0],F=I[1],U=Object(r.useState)(""),z=Object(d.a)(U,2),D=z[0],N=z[1];Object(r.useEffect)((function(){S&&e.history.push("/restaurants")}),[g,S]);var P=function(){var e=Object(v.a)(x.a.mark((function e(t){var a,r,n,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files[0],(r=new FormData).append("image",a),F(!0),e.prev=4,e.next=7,y.a.post("/api/uploads",r,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(_.token)}});case 7:n=e.sent,c=n.data,j(c),F(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),N(e.t0.message),F(!1);case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)("div",{md:{size:4,offset:1},children:Object(b.jsxs)(ge.a,{onSubmit:function(e){var t;e.preventDefault(),g((t={name:n,image:o,description:m},function(){var e=Object(v.a)(x.a.mark((function e(a,r){var n,c,s,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:T,payload:t}),n=r(),c=n.userSignin.userInfo,e.prev=2,e.next=5,y.a.post("/api/restaurants",t,{headers:{Authorization:"Bearer ".concat(c.token)}});case 5:s=e.sent,i=s.data,a({type:R,payload:i}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),a({type:C,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a){return e.apply(this,arguments)}}()))},children:[Object(b.jsx)(ye.a,{row:!0,children:Object(b.jsx)(Ee.a,{md:{size:4,offset:1},children:Object(b.jsx)(Se.a,{children:"Prid\u0117ti nauj\u0105 restoran\u0105"})})}),w&&Object(b.jsx)(h,{}),k&&Object(b.jsx)(p,{variant:"danger",children:k}),Object(b.jsxs)(ye.a,{row:!0,children:[Object(b.jsx)(Se.a,{for:"nameField",sm:1,children:"Restorano pavadinimas"}),Object(b.jsx)(Ee.a,{md:{size:4},children:Object(b.jsx)(ke.a,{required:!0,type:"text",name:"name",id:"nameField",placeholder:"\u012eveskite restorano pavadinim\u0105",onChange:function(e){return c(e.target.value)}})})]}),Object(b.jsxs)(ye.a,{row:!0,children:[Object(b.jsx)(Se.a,{for:"imageFile",sm:1,children:"Paveiksl\u0117lis"}),Object(b.jsxs)(Ee.a,{md:{size:4},children:[Object(b.jsx)(ke.a,{required:!0,type:"file",name:"imageUpload",id:"imageField",label:"Choose Image",onChange:P}),Object(b.jsx)("img",{src:o,style:{maxWidth:"22rem",maxHeight:"22rem"}}),L&&Object(b.jsx)(h,{}),D&&Object(b.jsx)(p,{variant:"danger",children:D})]})]}),Object(b.jsxs)(ye.a,{row:!0,children:[Object(b.jsx)(Se.a,{for:"descriptionField",sm:1,children:"Apra\u0161ymas"}),Object(b.jsx)(Ee.a,{md:{size:4},children:Object(b.jsx)(ke.a,{required:!0,type:"textarea",name:"description",id:"descriptionField",placeholder:"\u012eveskite apra\u0161ym\u0105",onChange:function(e){return f(e.target.value)}})})]}),Object(b.jsx)(ye.a,{check:!0,row:!0,children:Object(b.jsx)(Ee.a,{sm:{size:10,offset:1},children:Object(b.jsx)(q.a,{type:"submit",children:"Prid\u0117ti"})})})]})})}function _e(e){var t=e.match.params.id,a=Object(r.useState)(""),n=Object(d.a)(a,2),c=n[0],s=n[1],i=Object(r.useState)(""),o=Object(d.a)(i,2),j=o[0],u=o[1],O=Object(r.useState)(""),m=Object(d.a)(O,2),f=m[0],g=m[1],E=Object(l.b)(),S=Object(l.c)((function(e){return e.restaurantDetails})),k=S.loading,w=S.error,_=S.restaurant,A=Object(l.c)((function(e){return e.restaurantUpdate})),T=A.loading,R=A.error,C=A.success,I=Object(l.c)((function(e){return e.userSignin})).userInfo,z=Object(r.useState)(!1),D=Object(d.a)(z,2),N=D[0],P=D[1],B=Object(r.useState)(""),M=Object(d.a)(B,2),W=M[0],Q=M[1];Object(r.useEffect)((function(){C&&e.history.push("/restaurants/".concat(t)),_&&_._id===t?(s(_.name),u(_.image),g(_.description)):E(V(t))}),[_,E,t,C,e.history]);var G=function(){var e=Object(v.a)(x.a.mark((function e(t){var a,r,n,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files[0],(r=new FormData).append("image",a),P(!0),e.prev=4,e.next=7,y.a.post("/api/uploads",r,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(I.token)}});case 7:n=e.sent,c=n.data,u(c),P(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),Q(e.t0.message),P(!1);case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)("div",{md:{size:4,offset:1},children:Object(b.jsxs)(ge.a,{onSubmit:function(e){e.preventDefault(),E(function(e){return function(){var t=Object(v.a)(x.a.mark((function t(a,r){var n,c,s,i;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:L,payload:e}),n=r(),c=n.userSignin.userInfo,t.prev=2,t.next=5,y.a.put("/api/restaurants/".concat(e._id),e,{headers:{Authorization:"Bearer ".concat(c.token)}});case 5:s=t.sent,i=s.data,a({type:F,payload:i}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),a({type:U,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,a){return t.apply(this,arguments)}}()}({_id:t,name:c,image:j,description:f}))},children:[Object(b.jsx)(ye.a,{row:!0,children:Object(b.jsx)(Ee.a,{md:{size:4,offset:1},children:Object(b.jsx)(Se.a,{children:"Redaguoti restoran\u0105"})})}),T&&Object(b.jsx)(h,{}),R&&Object(b.jsx)(p,{variant:"danger",children:R}),k&&Object(b.jsx)(h,{}),w&&Object(b.jsx)(p,{variant:"danger",children:w}),Object(b.jsxs)(ye.a,{row:!0,children:[Object(b.jsx)(Se.a,{for:"nameField",sm:1,children:"Restorano pavadinimas"}),Object(b.jsx)(Ee.a,{md:{size:4},children:Object(b.jsx)(ke.a,{type:"text",name:"name",id:"nameField",placeholder:"\u012eveskite restorano pavadinim\u0105",value:c,onChange:function(e){return s(e.target.value)}})})]}),Object(b.jsxs)(ye.a,{row:!0,children:[Object(b.jsx)(Se.a,{for:"imageFile",sm:1,children:"Paveiksl\u0117lis"}),Object(b.jsxs)(Ee.a,{md:{size:4},children:[Object(b.jsx)(ke.a,{type:"file",name:"imageUpload",id:"imageField",label:"Choose Image",onChange:G}),Object(b.jsx)("img",{src:j,style:{maxWidth:"22rem",maxHeight:"22rem"}}),N&&Object(b.jsx)(h,{}),W&&Object(b.jsx)(p,{variant:"danger",children:W})]})]}),Object(b.jsxs)(ye.a,{row:!0,children:[Object(b.jsx)(Se.a,{for:"descriptionField",sm:1,children:"Apra\u0161ymas"}),Object(b.jsx)(Ee.a,{md:{size:4},children:Object(b.jsx)(ke.a,{type:"textarea",name:"description",id:"descriptionField",placeholder:"\u012eveskite apra\u0161ym\u0105",value:f,onChange:function(e){return g(e.target.value)}})})]}),Object(b.jsx)(ye.a,{check:!0,row:!0,children:Object(b.jsx)(Ee.a,{sm:{size:10,offset:1},children:Object(b.jsx)(q.a,{type:"submit",children:"Atnaujinti"})})})]})})}function Ae(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.mealList})),a=t.loading,n=t.error,c=t.meals,s=Object(r.useState)(""),i=Object(d.a)(s,2),o=i[0],j=i[1];return Object(r.useEffect)((function(){e(fe())}),[e]),Object(b.jsx)("div",{children:a?Object(b.jsx)(h,{}):n?Object(b.jsx)(p,{variant:"danger",children:n}):Object(b.jsxs)("div",{children:[Object(b.jsx)(W,{searchTerm:o,setSearchTerm:j}),Object(b.jsx)("div",{children:Object(b.jsx)(J.a,{children:(""===o?c:c.filter((function(e){var t=e.name.toLowerCase(),a=o.toLowerCase();return t.includes(a)}))).map((function(e){return Object(b.jsx)(X,{meal:e},e._id)}))})})]})})}var Te=a(153),Re=a(154),Ce=a(155),Ie=a(156),Le=a(157),Fe=a(161),Ue=a(162),ze=a(158);function De(e){var t=e.kcal,a=Object(r.useState)(!1),n=Object(d.a)(a,2),c=n[0],s=n[1],i=Object(r.useState)("Pasirinkite veikl\u0105"),o=Object(d.a)(i,2),l=o[0],j=o[1],u=Object(r.useState)(""),h=Object(d.a)(u,2),p=h[0],O=h[1],m=Object(r.useState)(""),f=Object(d.a)(m,2),x=f[0],v=f[1],g=Object(r.useState)("minutes"),y=Object(d.a)(g,2),E=y[0],S=y[1],k=[{activityName:"Va\u017ein\u0117dami dvira\u010diu",met:7.5},{activityName:"Begiodami",met:7},{activityName:"Vaik\u0161\u010diodami",met:3.5},{activityName:"Plaukdami",met:6}];return Object(b.jsx)("div",{children:Object(b.jsx)(Te.a,{children:Object(b.jsxs)(Re.a,{children:[Object(b.jsx)(Ce.a,{tag:"h5",children:"Sudeginkite kalorijas"}),"Pasirinkite veikl\u0105"===l||""===x?Object(b.jsx)(Ie.a,{tag:"h5",children:"Pasirinkite veikl\u0105 ir \u012fveskite savo svor\u012f"}):Object(b.jsxs)(Ie.a,{tag:"h5",children:[l," ",x," ",E]}),Object(b.jsxs)(Le.a,{isOpen:c,toggle:function(){return s((function(e){return!e}))},children:[Object(b.jsx)(Fe.a,{caret:!0,children:l}),Object(b.jsxs)(Ue.a,{onClick:function(e){return j(e.target.value)},children:[Object(b.jsx)(ze.a,{value:"Va\u017ein\u0117dami dvira\u010diu",children:"Va\u017ein\u0117dami dvira\u010diu"}),Object(b.jsx)(ze.a,{value:"Begiodami",children:"Begiodami"}),Object(b.jsx)(ze.a,{value:"Vaik\u0161\u010diodami",children:"Vaik\u0161\u010diodami"}),Object(b.jsx)(ze.a,{value:"Plaukdami",children:"Plaukdami"})]})]}),Object(b.jsx)(ke.a,{onChange:function(e){return O(e.target.value)}}),Object(b.jsx)(q.a,{onClick:function(){if("Pasirinkite veikl\u0105"!=l&&""!=p){var e=3.5*k.filter((function(e){return e.activityName===l}))[0].met*p/200,a=Math.round(t/e);if(a>=60){var r=Math.floor(a/60),n=a%60;v(n<=9?"".concat(r,":0").concat(n):"".concat(r,":").concat(n)),S("valand\u0173")}else v(a),S("minutes")}},children:"Skai\u010diuoti"})]})})})}var Ne="FAVORITE_LIST_REQUEST",Pe="FAVORITE_LIST_SUCCESS",Be="FAVORITE_LIST_FAIL",Me="FAVORITE_CREATE_REQUEST",Ve="FAVORITE_CREATE_SUCCESS",We="FAVORITE_CREATE_FAIL",qe="FAVORITE_DELETE_REQUEST",Qe="FAVORITE_DELETE_SUCCESS",Ge="FAVORITE_DELETE_FAIL",He=function(){return function(){var e=Object(v.a)(x.a.mark((function e(t,a){var r,n,c,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:Ne}),r=a(),n=r.userSignin.userInfo,e.prev=2,e.next=5,y.a.get("/api/favorites",{headers:{Authorization:"Bearer ".concat(n.token)}});case 5:c=e.sent,s=c.data,t({type:Pe,payload:s}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t({type:Be,payload:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a){return e.apply(this,arguments)}}()};function Je(e){var t=e.mealId,a=Object(l.c)((function(e){return e.favoriteList})),n=a.loading,c=a.error,s=a.favorites,i=Object(r.useState)(!1),o=Object(d.a)(i,2),j=o[0],u=o[1],O=Object(l.b)();Object(r.useEffect)((function(){O(He())}),[O]),Object(r.useEffect)((function(){s&&s.includes(t)&&u(!0)}),[s]);var m=function(){var e;O((e=t,function(){var t=Object(v.a)(x.a.mark((function t(a,r){var n,c,s,i;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:Me,payload:{favorite:e}}),n=r(),c=n.userSignin.userInfo,t.prev=2,t.next=5,y.a.post("/api/favorites",{favorite:e},{headers:{Authorization:"Bearer ".concat(c.token)}});case 5:s=t.sent,i=s.data,a({type:Ve,payload:i}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),a({type:We,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,a){return t.apply(this,arguments)}}())),u(!0)},f=function(){var e;O((e=t,function(){var t=Object(v.a)(x.a.mark((function t(a,r){var n,s;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:qe,payload:{favorite:e}}),n=r(),s=n.userSignin.userInfo;try{y.a.delete("/api/favorites",{headers:{Authorization:"Bearer ".concat(s.token)},data:{favorite:e}}),a({type:Qe})}catch(c){a({type:Ge,payload:c.response&&c.response.data.message?c.response.data.message:c.message})}case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())),u(!1)};return Object(b.jsx)("div",{children:n?Object(b.jsx)(h,{}):c?Object(b.jsx)(p,{variant:"danger",children:c}):j?Object(b.jsx)(q.a,{onClick:function(){return f()},children:"Pa\u0161alinti i\u0161 \u012fsimint\u0173"}):Object(b.jsx)(q.a,{onClick:function(){return m()},children:"Prid\u0117ti prie \u012fsimint\u0173"})})}function Ke(e){var t=e.mealId,a=Object(l.c)((function(e){return e.mealApprove})),n=a.loading,c=(a.success,a.error),s=Object(r.useState)(e.isApproved),i=Object(d.a)(s,2),o=i[0],j=i[1],u=Object(l.b)(),O=function(){u(function(e){return function(){var t=Object(v.a)(x.a.mark((function t(a,r){var n,c;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:pe,payload:e}),n=r(),c=n.userSignin.userInfo,t.prev=2,t.next=5,y.a.put("/api/meals/".concat(e,"/changeApprove"),"approve",{headers:{Authorization:"Bearer ".concat(c.token)}});case 5:t.sent.data,a({type:Oe}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),a({type:me,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,a){return t.apply(this,arguments)}}()}(t)),j(!o)};return Object(b.jsx)("div",{children:n?Object(b.jsx)(h,{}):c?Object(b.jsx)(p,{variant:"danger",children:c}):o?Object(b.jsx)(q.a,{onClick:function(){return O()},children:"Pa\u0161alinti patvirtinim\u0105"}):Object(b.jsx)(q.a,{onClick:function(){return O()},children:"Patvirtinti"})})}function Xe(e){var t=Object(l.b)(),a=e.match.params.id,n=Object(l.c)((function(e){return e.mealDetails})),c=n.loading,s=n.error,i=n.meal,o=Object(l.c)((function(e){return e.mealDelete})).success,d=Object(l.c)((function(e){return e.userSignin})).userInfo;Object(r.useEffect)((function(){t(xe(a)),o&&e.history.push("/mymeals/")}),[t,a,o]);var j=function(){window.confirm("Ar tikrai norite pa\u0161alinti patiekal\u0105?")&&t(function(e){return function(){var t=Object(v.a)(x.a.mark((function t(a,r){var n,c;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:je,payload:e}),n=r(),c=n.userSignin.userInfo,t.prev=2,t.next=5,y.a.delete("/api/meals/".concat(e),{headers:{Authorization:"Bearer ".concat(c.token)}});case 5:t.sent.data,a({type:ue}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),a({type:be,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,a){return t.apply(this,arguments)}}()}(a))};return Object(b.jsx)("div",{children:c?Object(b.jsx)(h,{}):s?Object(b.jsx)(p,{variant:"danger",children:s}):Object(b.jsxs)("div",{children:[d?Object(b.jsx)("div",{children:d.isAdmin?Object(b.jsx)("div",{children:Object(b.jsx)(Ke,{mealId:a,isApproved:i.approved})}):Object(b.jsx)("div",{})}):Object(b.jsx)("div",{}),d?Object(b.jsxs)("div",{children:[Object(b.jsx)(Je,{mealId:a}),d._id===i.createdBy?Object(b.jsxs)("div",{children:[Object(b.jsx)(q.a,{href:"/mymeals/".concat(i._id,"/edit"),children:"Redaguoti"}),Object(b.jsx)(q.a,{onClick:function(){return j()},children:"Pa\u0161alinti"})]}):Object(b.jsx)("div",{})]}):Object(b.jsx)("div",{}),Object(b.jsxs)(O.q,{center:!0,className:"row-cols-1 row-cols-md-3 g-4",children:[Object(b.jsx)(O.f,{children:Object(b.jsxs)(O.a,{style:{width:"30rem"},children:[Object(b.jsx)(O.d,{position:"top",src:i.image,alt:"failed to load photo :/",style:{maxWidth:"30rem",maxHeight:"30rem"}}),Object(b.jsx)(O.b,{children:Object(b.jsx)(O.e,{children:i.name})}),Object(b.jsxs)(O.i,{flush:!0,children:[Object(b.jsxs)(O.j,{children:["Kalorijos:  ",i.kcal]}),Object(b.jsxs)(O.j,{children:["Baltymai: ",i.protein]}),Object(b.jsxs)(O.j,{children:["Riebalai: ",i.fat]}),Object(b.jsxs)(O.j,{children:["Angliavandeniai: ",i.carbohydrates]})]})]})}),Object(b.jsx)(O.f,{children:Object(b.jsx)(De,{kcal:i.kcal})})]})]})})}function $e(e){var t=Object(r.useState)(""),a=Object(d.a)(t,2),n=a[0],c=a[1],s=Object(r.useState)(""),i=Object(d.a)(s,2),o=i[0],j=i[1],u=Object(r.useState)(""),O=Object(d.a)(u,2),m=O[0],f=O[1],g=Object(r.useState)(""),E=Object(d.a)(g,2),S=E[0],k=E[1],w=Object(r.useState)(""),_=Object(d.a)(w,2),A=_[0],T=_[1],R=Object(r.useState)(""),C=Object(d.a)(R,2),I=C[0],L=C[1],F=Object(r.useState)(""),U=Object(d.a)(F,2),z=U[0],D=U[1],N=Object(r.useState)(""),P=Object(d.a)(N,2),B=P[0],V=P[1],W=Object(l.b)(),Q=Object(l.c)((function(e){return e.mealCreate})),G=Q.success,H=Q.error,J=Q.loading,K=Object(l.c)((function(e){return e.userSignin})).userInfo,X=Object(l.c)((function(e){return e.restaurantList})),$=X.loading,Y=X.error,Z=X.restaurants,ee=Object(r.useState)(!1),te=Object(d.a)(ee,2),ae=te[0],se=te[1],ie=Object(r.useState)(""),oe=Object(d.a)(ie,2),de=oe[0],le=oe[1];Object(r.useEffect)((function(){W(M()),G&&e.history.push("/mymeals")}),[W,G]);var je=function(){var e=Object(v.a)(x.a.mark((function e(t){var a,r,n,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files[0],(r=new FormData).append("image",a),se(!0),e.prev=4,e.next=7,y.a.post("/api/uploads",r,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(K.token)}});case 7:n=e.sent,c=n.data,V(c),se(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),le(e.t0.message),se(!1);case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)("div",{md:{size:4,offset:1},children:Object(b.jsxs)(ge.a,{onSubmit:function(e){e.preventDefault(),W(function(e,t,a,r,n,c,s,i,o){return function(){var d=Object(v.a)(x.a.mark((function d(l,j){var u,b,h,p;return x.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return l({type:re,payload:{name:e,restaurant_id:t,kcal:a,protein:r,fat:n,carbohydrates:c,servingWeight:s,createdBy:i,image:o}}),u=j(),b=u.userSignin.userInfo,d.prev=2,d.next=5,y.a.post("/api/meals",{name:e,restaurant_id:t,kcal:a,protein:r,fat:n,carbohydrates:c,servingWeight:s,createdBy:i,image:o},{headers:{Authorization:"Bearer ".concat(b.token)}});case 5:h=d.sent,p=h.data,l({type:ne,payload:p}),d.next=13;break;case 10:d.prev=10,d.t0=d.catch(2),l({type:ce,payload:d.t0.response&&d.t0.response.data.message?d.t0.response.data.message:d.t0.message});case 13:case"end":return d.stop()}}),d,null,[[2,10]])})));return function(e,t){return d.apply(this,arguments)}}()}(n,o,m,S,A,I,z,K._id,B))},children:[Object(b.jsx)(ye.a,{row:!0,children:Object(b.jsx)(Ee.a,{md:{size:4,offset:1},children:Object(b.jsx)(Se.a,{children:"Prid\u0117ti nauj\u0105 patiekal\u0105"})})}),J&&Object(b.jsx)(h,{}),H&&Object(b.jsx)(p,{variant:"danger",children:H}),Object(b.jsxs)(ye.a,{row:!0,children:[Object(b.jsx)(Se.a,{for:"nameField",sm:1,children:"Patiekalo pavadinimas"}),Object(b.jsx)(Ee.a,{md:{size:4},children:Object(b.jsx)(ke.a,{required:!0,type:"text",name:"name",id:"nameField",placeholder:"\u012eveskite patiekalo pavadinim\u0105",onChange:function(e){return c(e.target.value)}})})]}),Object(b.jsxs)(ye.a,{row:!0,children:[Object(b.jsx)(Se.a,{for:"restaurantSelect",sm:1,children:"Restoranas"}),Object(b.jsx)(Ee.a,{md:{size:4},children:$?Object(b.jsx)(h,{}):Y?Object(b.jsx)(p,{variant:"danger",children:H}):Object(b.jsxs)(ke.a,{type:"select",name:"select",id:"restaurantSelect",onClick:function(e){return j(e.target.value)},children:[Object(b.jsx)("option",{children:"-Pasirinkite restoran\u0105-"}),Z.map((function(e){return Object(b.jsx)("option",{value:e._id,children:e.name},e._id)}))]})})]}),Object(b.jsxs)(ye.a,{row:!0,children:[Object(b.jsx)(Se.a,{for:"kcalField",sm:1,children:"Kalorijos"}),Object(b.jsx)(Ee.a,{md:{size:4},children:Object(b.jsx)(ke.a,{required:!0,type:"number",name:"kcal",id:"kcalField",placeholder:"\u012eveskite kalorijas",onChange:function(e){return f(e.target.value)}})})]}),Object(b.jsxs)(ye.a,{row:!0,children:[Object(b.jsx)(Se.a,{for:"proteinField",sm:1,children:"Baltymai"}),Object(b.jsx)(Ee.a,{md:{size:4},children:Object(b.jsx)(ke.a,{required:!0,type:"number",step:"0.1",name:"protein",id:"proteinField",placeholder:"\u012eveskite baltym\u0173 kiek\u012f",onChange:function(e){return k(e.target.value)}})})]}),Object(b.jsxs)(ye.a,{row:!0,children:[Object(b.jsx)(Se.a,{for:"fatField",sm:1,children:"Riebalai"}),Object(b.jsx)(Ee.a,{md:{size:4},children:Object(b.jsx)(ke.a,{required:!0,type:"number",step:"0.1",name:"fat",id:"fatField",placeholder:"\u012eveskite riebal\u0173 kiek\u012f",onChange:function(e){return T(e.target.value)}})})]}),Object(b.jsxs)(ye.a,{row:!0,children:[Object(b.jsx)(Se.a,{for:"carbohydratesField",sm:1,children:"Angliavandeniai"}),Object(b.jsx)(Ee.a,{md:{size:4},children:Object(b.jsx)(ke.a,{required:!0,type:"number",step:"0.1",name:"carbohydrates",id:"carbohydratesField",placeholder:"\u012eveskite angliavandeni\u0173 kiek\u012f",onChange:function(e){return L(e.target.value)}})})]}),Object(b.jsxs)(ye.a,{row:!0,children:[Object(b.jsx)(Se.a,{for:"servingWeightField",sm:1,children:"Porcijos svoris"}),Object(b.jsx)(Ee.a,{md:{size:4},children:Object(b.jsx)(ke.a,{required:!0,type:"number",name:"servingWeight",id:"servingWeightField",placeholder:"\u012eveskite procijos svor\u012f",onChange:function(e){return D(e.target.value)}})})]}),Object(b.jsxs)(ye.a,{row:!0,children:[Object(b.jsx)(Se.a,{for:"imageFile",sm:1,children:"Paveiksl\u0117lis"}),Object(b.jsxs)(Ee.a,{md:{size:4},children:[Object(b.jsx)(ke.a,{required:!0,type:"file",name:"imageUpload",id:"imageField",label:"Choose Image",onChange:je}),Object(b.jsx)("img",{src:B,style:{maxWidth:"22rem",maxHeight:"22rem"}}),ae&&Object(b.jsx)(h,{}),de&&Object(b.jsx)(p,{variant:"danger",children:de})]})]}),Object(b.jsx)(ye.a,{check:!0,row:!0,children:Object(b.jsx)(Ee.a,{sm:{size:10,offset:1},children:Object(b.jsx)(q.a,{type:"submit",children:"Prid\u0117ti"})})})]})})}function Ye(e){var t=e.match.params.id,a=Object(r.useState)(""),n=Object(d.a)(a,2),c=n[0],s=n[1],i=Object(r.useState)(""),o=Object(d.a)(i,2),j=o[0],u=o[1],O=Object(r.useState)(""),m=Object(d.a)(O,2),f=m[0],g=m[1],E=Object(r.useState)(""),S=Object(d.a)(E,2),k=S[0],w=S[1],_=Object(r.useState)(""),A=Object(d.a)(_,2),T=A[0],R=A[1],C=Object(r.useState)(""),I=Object(d.a)(C,2),L=I[0],F=I[1],U=Object(r.useState)(""),z=Object(d.a)(U,2),D=z[0],N=z[1],P=Object(r.useState)(""),B=Object(d.a)(P,2),V=B[0],W=B[1],Q=Object(l.c)((function(e){return e.mealDetails})),G=Q.loading,H=Q.error,J=Q.meal,K=Object(l.c)((function(e){return e.mealUpdate})),X=K.loading,$=K.error,Y=K.success,Z=Object(l.c)((function(e){return e.restaurantList})),ee=Z.loading,te=Z.error,ae=Z.restaurants,re=Object(l.b)();Object(r.useEffect)((function(){re(M())}),[re]),Object(r.useEffect)((function(){Y&&e.history.push("/meals/".concat(t)),J&&J._id===t?(s(J.name),u(J.restaurant_id),g(J.kcal),w(J.protein),R(J.fat),F(J.carbohydrates),N(J.servingWeight),W(J.image)):re(xe(t))}),[J,re,t,Y,e.history]);var ne=Object(r.useState)(!1),ce=Object(d.a)(ne,2),se=ce[0],le=ce[1],je=Object(r.useState)(""),ue=Object(d.a)(je,2),be=ue[0],he=ue[1],pe=Object(l.c)((function(e){return e.userSignin})).userInfo,Oe=function(){var e=Object(v.a)(x.a.mark((function e(t){var a,r,n,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files[0],(r=new FormData).append("image",a),le(!0),e.prev=4,e.next=7,y.a.post("/api/uploads",r,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(pe.token)}});case 7:n=e.sent,c=n.data,W(c),le(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),he(e.t0.message),le(!1);case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)("div",{md:{size:4,offset:1},children:Object(b.jsxs)(ge.a,{onSubmit:function(e){e.preventDefault(),re(function(e){return function(){var t=Object(v.a)(x.a.mark((function t(a,r){var n,c,s,i;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:ie,payload:e}),n=r(),c=n.userSignin.userInfo,t.prev=2,t.next=5,y.a.put("/api/meals/".concat(e._id),e,{headers:{Authorization:"Bearer ".concat(c.token)}});case 5:s=t.sent,i=s.data,a({type:oe,payload:i}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),a({type:de,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,a){return t.apply(this,arguments)}}()}({_id:t,name:c,restaurant_id:j,kcal:f,protein:k,fat:T,carbohydrates:L,servingWeight:D,image:V}))},children:[Object(b.jsx)(ye.a,{row:!0,children:Object(b.jsx)(Ee.a,{md:{size:4,offset:1},children:Object(b.jsx)(Se.a,{children:"Redaguoti patiekal\u0105"})})}),X&&Object(b.jsx)(h,{}),$&&Object(b.jsx)(p,{variant:"danger",children:$}),G&&Object(b.jsx)(h,{}),H&&Object(b.jsx)(p,{variant:"danger",children:H}),Object(b.jsxs)(ye.a,{row:!0,children:[Object(b.jsx)(Se.a,{for:"nameField",sm:1,children:"Patiekalo pavadinimas"}),Object(b.jsx)(Ee.a,{md:{size:4},children:Object(b.jsx)(ke.a,{type:"text",name:"name",id:"nameField",placeholder:"\u012eveskite patiekalo pavadinim\u0105",value:c,onChange:function(e){return s(e.target.value)}})})]}),Object(b.jsxs)(ye.a,{row:!0,children:[Object(b.jsx)(Se.a,{for:"restaurantSelect",sm:1,children:"Restoranas"}),Object(b.jsx)(Ee.a,{md:{size:4},children:ee?Object(b.jsx)(h,{}):te?Object(b.jsx)(p,{variant:"danger",children:H}):Object(b.jsxs)(ke.a,{type:"select",name:"select",id:"restaurantSelect",value:j,onClick:function(e){return u(e.target.value)},children:[Object(b.jsx)("option",{children:"-Pasirinkite restoran\u0105-"}),ae.map((function(e){return Object(b.jsx)("option",{value:e._id,children:e.name},e._id)}))]})})]}),Object(b.jsxs)(ye.a,{row:!0,children:[Object(b.jsx)(Se.a,{for:"kcalField",sm:1,children:"Kalorijos"}),Object(b.jsx)(Ee.a,{md:{size:4},children:Object(b.jsx)(ke.a,{type:"number",name:"kcal",id:"kcalField",placeholder:"\u012eveskite kalorijas",value:f,onChange:function(e){return g(e.target.value)}})})]}),Object(b.jsxs)(ye.a,{row:!0,children:[Object(b.jsx)(Se.a,{for:"proteinField",sm:1,children:"Baltymai"}),Object(b.jsx)(Ee.a,{md:{size:4},children:Object(b.jsx)(ke.a,{type:"number",step:"0.1",name:"protein",id:"proteinField",placeholder:"\u012eveskite baltym\u0173 kiek\u012f",value:k,onChange:function(e){return w(e.target.value)}})})]}),Object(b.jsxs)(ye.a,{row:!0,children:[Object(b.jsx)(Se.a,{for:"fatField",sm:1,children:"Riebalai"}),Object(b.jsx)(Ee.a,{md:{size:4},children:Object(b.jsx)(ke.a,{type:"number",step:"0.1",name:"fat",id:"fatField",placeholder:"\u012eveskite riebal\u0173 kiek\u012f",value:T,onChange:function(e){return R(e.target.value)}})})]}),Object(b.jsxs)(ye.a,{row:!0,children:[Object(b.jsx)(Se.a,{for:"carbohydratesField",sm:1,children:"Angliavandeniai"}),Object(b.jsx)(Ee.a,{md:{size:4},children:Object(b.jsx)(ke.a,{type:"number",step:"0.1",name:"carbohydrates",id:"carbohydratesField",placeholder:"\u012eveskite angliavandeni\u0173 kiek\u012f",value:L,onChange:function(e){return F(e.target.value)}})})]}),Object(b.jsxs)(ye.a,{row:!0,children:[Object(b.jsx)(Se.a,{for:"servingWeightField",sm:1,children:"Porcijos svoris"}),Object(b.jsx)(Ee.a,{md:{size:4},children:Object(b.jsx)(ke.a,{type:"number",name:"servingWeight",id:"servingWeightField",placeholder:"\u012eveskite procijos svor\u012f",value:D,onChange:function(e){return N(e.target.value)}})})]}),Object(b.jsxs)(ye.a,{row:!0,children:[Object(b.jsx)(Se.a,{for:"imageFile",sm:1,children:"Paveiksl\u0117lis"}),Object(b.jsxs)(Ee.a,{md:{size:4},children:[Object(b.jsx)(ke.a,{type:"file",name:"imageUpload",id:"imageField",label:"Choose Image",onChange:Oe}),Object(b.jsx)("img",{src:V,style:{maxWidth:"22rem",maxHeight:"22rem"}}),se&&Object(b.jsx)(h,{}),be&&Object(b.jsx)(p,{variant:"danger",children:be})]})]}),Object(b.jsx)(ye.a,{check:!0,row:!0,children:Object(b.jsx)(Ee.a,{sm:{size:10,offset:1},children:Object(b.jsx)(q.a,{type:"submit",children:"Atnaujinti"})})})]})})}var Ze="USER_REGISTER_REQUEST",et="USER_REGISTER_SUCCESS",tt="USER_REGISTER_FAIL",at="USER_SIGNIN_REQUEST",rt="USER_SIGNIN_SUCCESS",nt="USER_SIGNIN_FAIL",ct="USER_SIGNOUT",st="USER_DETAILS_REQUEST",it="USER_DETAILS_SUCCESS",ot="USER_DETAILS_FAIL";function dt(e){var t=Object(r.useState)(""),a=Object(d.a)(t,2),n=a[0],c=a[1],s=Object(r.useState)(""),o=Object(d.a)(s,2),j=o[0],u=o[1],O=e.location.search?e.location.search.split("=")[1]:"/",m=Object(l.c)((function(e){return e.userSignin})),f=m.userInfo,g=m.loading,E=m.error,S=Object(l.b)();return Object(r.useEffect)((function(){f&&E&&e.history.push(O)}),[e.history,O,f]),Object(b.jsx)("div",{md:{size:4,offset:1},children:Object(b.jsxs)(ge.a,{onSubmit:function(e){e.preventDefault(),S(function(e,t){return function(){var a=Object(v.a)(x.a.mark((function a(r){var n,c;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:at,payload:{username:e,password:t}}),a.prev=1,a.next=4,y.a.post("/api/users/signin",{username:e,password:t});case 4:n=a.sent,c=n.data,r({type:rt,payload:c}),localStorage.setItem("userInfo",JSON.stringify(c)),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),r({type:nt,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 13:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e){return a.apply(this,arguments)}}()}(n,j))},children:[Object(b.jsx)(ye.a,{row:!0,children:Object(b.jsx)(Ee.a,{md:{size:4,offset:1},children:Object(b.jsx)(Se.a,{children:"Log in"})})}),g&&Object(b.jsx)(h,{}),E&&Object(b.jsx)(p,{variant:"danger",children:E}),Object(b.jsxs)(ye.a,{row:!0,children:[Object(b.jsx)(Se.a,{for:"usernameField",sm:1,children:"Username"}),Object(b.jsx)(Ee.a,{md:{size:4},children:Object(b.jsx)(ke.a,{required:!0,type:"text",name:"username",id:"usernameField",placeholder:"Enter your username",onChange:function(e){return c(e.target.value)}})})]}),Object(b.jsxs)(ye.a,{row:!0,children:[Object(b.jsx)(Se.a,{for:"passwordField",sm:1,children:"Password"}),Object(b.jsx)(Ee.a,{md:{size:4},children:Object(b.jsx)(ke.a,{required:!0,type:"password",name:"password",id:"passwordField",placeholder:"Enter your password",onChange:function(e){return u(e.target.value)}})})]}),Object(b.jsx)(ye.a,{check:!0,row:!0,children:Object(b.jsx)(Ee.a,{sm:{size:10,offset:1},children:Object(b.jsx)(q.a,{type:"submit",children:"Log in"})})}),Object(b.jsx)(ye.a,{row:!0,children:Object(b.jsxs)(Ee.a,{md:{size:4,offset:1},children:[Object(b.jsx)(ke.a,{plaintext:!0,value:"New user?"}),Object(b.jsx)(i.b,{to:"/register",children:"Register"})]})})]})})}function lt(e){var t=Object(r.useState)(""),a=Object(d.a)(t,2),n=a[0],c=a[1],s=Object(r.useState)(""),o=Object(d.a)(s,2),j=o[0],u=o[1],O=Object(r.useState)(""),m=Object(d.a)(O,2),f=m[0],g=m[1],E=Object(r.useState)(""),S=Object(d.a)(E,2),k=S[0],w=S[1],_=e.location.search?e.location.search.split("=")[1]:"/",A=Object(l.c)((function(e){return e.userRegister})),T=A.userInfo,R=A.loading,C=A.error,I=Object(l.b)();return Object(r.useEffect)((function(){T&&e.history.push("/")}),[]),Object(r.useEffect)((function(){T&&C&&e.history.push(_)}),[e.history,_,T]),Object(b.jsx)("div",{md:{size:4,offset:1},children:Object(b.jsxs)(ge.a,{onSubmit:function(e){e.preventDefault(),f!==k?alert("Password and confirm password do not match"):I(function(e,t,a){return function(){var r=Object(v.a)(x.a.mark((function r(n){var c,s;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:Ze,payload:{username:e,email:t,password:a}}),r.prev=1,r.next=4,y.a.post("/api/users/register",{username:e,email:t,password:a});case 4:c=r.sent,s=c.data,n({type:et,payload:s}),n({type:rt,payload:s}),localStorage.setItem("userInfo",JSON.stringify(s)),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(1),n({type:tt,payload:r.t0.response&&r.t0.response.data.message?r.t0.response.data.message:r.t0.message});case 14:case"end":return r.stop()}}),r,null,[[1,11]])})));return function(e){return r.apply(this,arguments)}}()}(n,j,f))},children:[Object(b.jsx)(ye.a,{row:!0,children:Object(b.jsx)(Ee.a,{md:{size:4,offset:1},children:Object(b.jsx)(Se.a,{children:"Register"})})}),R&&Object(b.jsx)(h,{}),C&&Object(b.jsx)(p,{variant:"danger",children:C}),Object(b.jsxs)(ye.a,{row:!0,children:[Object(b.jsx)(Se.a,{for:"usernameField",sm:1,children:"Username"}),Object(b.jsx)(Ee.a,{md:{size:4},children:Object(b.jsx)(ke.a,{required:!0,type:"text",name:"username",id:"usernameField",placeholder:"Enter your username",onChange:function(e){return c(e.target.value)}})})]}),Object(b.jsxs)(ye.a,{row:!0,children:[Object(b.jsx)(Se.a,{for:"emailField",sm:1,children:"Email"}),Object(b.jsx)(Ee.a,{md:{size:4},children:Object(b.jsx)(ke.a,{required:!0,type:"text",name:"email",id:"emailField",placeholder:"Enter your email",onChange:function(e){return u(e.target.value)}})})]}),Object(b.jsxs)(ye.a,{row:!0,children:[Object(b.jsx)(Se.a,{for:"passwordField",sm:1,children:"Password"}),Object(b.jsx)(Ee.a,{md:{size:4},children:Object(b.jsx)(ke.a,{required:!0,type:"password",name:"password",id:"passwordField",placeholder:"Enter your password",onChange:function(e){return g(e.target.value)}})})]}),Object(b.jsxs)(ye.a,{row:!0,children:[Object(b.jsx)(Se.a,{for:"confirmPasswordField",sm:1,children:"Confirm Password"}),Object(b.jsx)(Ee.a,{md:{size:4},children:Object(b.jsx)(ke.a,{required:!0,type:"password",name:"password",id:"confirmPasswordField",placeholder:"Enter your password",onChange:function(e){return w(e.target.value)}})})]}),Object(b.jsx)(ye.a,{check:!0,row:!0,children:Object(b.jsx)(Ee.a,{sm:{size:10,offset:1},children:Object(b.jsx)(q.a,{type:"submit",children:"Register"})})}),Object(b.jsx)(ye.a,{row:!0,children:Object(b.jsxs)(Ee.a,{md:{size:4,offset:1},children:[Object(b.jsx)(Se.a,{children:"Have account?"}),Object(b.jsx)(i.b,{to:"/signin",children:" Log in"})]})})]})})}function jt(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.mealList})),a=t.loading,n=t.error,c=t.meals,s=Object(l.c)((function(e){return e.userSignin})).userInfo,i=Object(r.useState)(""),o=Object(d.a)(i,2),j=o[0],u=o[1],O=function(){return c.filter((function(e){return e.createdBy===s._id}))};return Object(r.useEffect)((function(){e(fe())}),[e]),Object(b.jsx)("div",{children:a?Object(b.jsx)(h,{}):n?Object(b.jsx)(p,{variant:"danger",children:n}):Object(b.jsxs)("div",{children:[Object(b.jsx)(W,{searchTerm:j,setSearchTerm:u}),Object(b.jsx)(q.a,{href:"/mymeals/add",children:"Add meal"}),Object(b.jsx)("div",{children:Object(b.jsx)(J.a,{children:(console.log("users meals:",O()),""===j?O():O().filter((function(e){return e.name.toLowerCase().includes(j)}))).map((function(e){return Object(b.jsx)(X,{meal:e},e._id)}))})})]})})}function ut(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.mealList})),a=t.loading,n=t.error,c=t.meals,s=Object(l.c)((function(e){return e.favoriteList})),i=s.loading,o=s.error,j=s.favorites,u=Object(r.useState)(""),O=Object(d.a)(u,2),m=O[0],f=O[1],x=function(){return c.filter((function(e){return j.includes(e._id)}))};return Object(r.useEffect)((function(){e(fe()),e(He())}),[e]),Object(b.jsx)("div",{children:a?Object(b.jsx)(h,{}):n?Object(b.jsx)(p,{variant:"danger",children:n}):i?Object(b.jsx)(h,{}):o?Object(b.jsx)(p,{variant:"danger",children:o}):Object(b.jsxs)("div",{children:[Object(b.jsx)(W,{searchTerm:m,setSearchTerm:f}),Object(b.jsx)("div",{children:Object(b.jsx)(J.a,{children:(console.log("favorite meals:",x()),""===m?x():x().filter((function(e){return e.name.toLowerCase().includes(m)}))).map((function(e){return Object(b.jsx)(X,{meal:e},e._id)}))})})]})})}var bt=a(22),ht=a(30);function pt(e){var t=e.component,a=Object(ht.a)(e,["component"]),r=Object(l.c)((function(e){return e.userSignin})).userInfo;return Object(b.jsx)(o.b,Object(bt.a)(Object(bt.a)({},a),{},{render:function(e){return r?Object(b.jsx)(t,Object(bt.a)({},e)):Object(b.jsx)(o.a,{to:"/signin"})}}))}function Ot(e){var t=e.component,a=Object(ht.a)(e,["component"]),r=Object(l.c)((function(e){return e.userSignin})).userInfo;return Object(b.jsx)(o.b,Object(bt.a)(Object(bt.a)({},a),{},{render:function(e){return r?Object(b.jsx)(o.a,{to:"/"}):Object(b.jsx)(t,Object(bt.a)({},e))}}))}function mt(e){var t=e.component,a=Object(ht.a)(e,["component"]),r=Object(l.c)((function(e){return e.userSignin})).userInfo;return Object(b.jsx)(o.b,Object(bt.a)(Object(bt.a)({},a),{},{render:function(e){return r&&r.isAdmin?Object(b.jsx)(t,Object(bt.a)({},e)):Object(b.jsx)(o.a,{to:"/signin"})}}))}var ft=a(159),xt=a(160);function vt(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),a=t[0],n=t[1],c=Object(l.c)((function(e){return e.userSignin})).userInfo,s=Object(l.b)();return Object(b.jsx)("header",{children:Object(b.jsx)(O.k,{expand:"lg",light:!0,bgColor:"white",children:Object(b.jsxs)(O.g,{fluid:!0,children:[Object(b.jsx)(O.l,{href:"/",children:Object(b.jsx)(O.h,{className:"ms-1",icon:"utensils",size:"lg"})}),Object(b.jsx)(ft.a,{onClick:function(){return n(!a)}}),Object(b.jsx)(xt.a,{isOpen:a,navbar:!0,children:Object(b.jsxs)(O.o,{right:!0,className:"mb-2 mb-lg-0",children:[Object(b.jsx)(O.m,{active:!0,children:Object(b.jsx)(O.n,{"aria-current":"page",href:"/restaurants",children:"Restoranai"})}),Object(b.jsx)(O.m,{children:Object(b.jsx)(O.n,{href:"/meals",children:"Patiekalai"})}),Object(b.jsx)(O.m,{children:c?Object(b.jsxs)("div",{children:[Object(b.jsx)(O.m,{children:Object(b.jsx)(O.n,{href:"/favorites",children:"\u012esiminti"})}),Object(b.jsx)(O.m,{children:Object(b.jsx)(O.n,{href:"/mymeals",children:"Mano patiekalai"})}),Object(b.jsx)(O.m,{children:Object(b.jsx)("h1",{children:c.name})}),Object(b.jsx)(O.n,{"aria-current":"page",href:"#signout",onClick:function(){s((function(e){localStorage.removeItem("userInfo"),e({type:ct})}))},children:Object(b.jsx)(O.h,{className:"ms-1",icon:"sign-out-alt",size:"lg"})})]}):Object(b.jsx)("div",{children:Object(b.jsx)(O.n,{className:"ml-auto p-2 col-example","aria-current":"page",href:"/signin",children:Object(b.jsx)(O.h,{className:"ms-1",icon:"sign-in-alt",size:"lg"})})})})]})})]})})})}var gt=function(){return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(vt,{}),Object(b.jsx)(i.a,{children:Object(b.jsx)("div",{children:Object(b.jsxs)(o.d,{children:[Object(b.jsx)(o.b,{exact:!0,path:"/",component:Q}),Object(b.jsx)(o.b,{exact:!0,path:"/restaurants",component:Q}),Object(b.jsx)(mt,{exact:!0,path:"/restaurants/add",component:we}),Object(b.jsx)(o.b,{exact:!0,path:"/restaurants/:id",component:ve}),Object(b.jsx)(mt,{exact:!0,path:"/restaurants/:id/edit",component:_e}),Object(b.jsx)(o.b,{exact:!0,path:"/meals",component:Ae}),Object(b.jsx)(o.b,{exact:!0,path:"/meals/:id",component:Xe}),Object(b.jsx)(Ot,{exact:!0,path:"/signin",component:dt}),Object(b.jsx)(Ot,{exact:!0,path:"/register",component:lt}),Object(b.jsx)(pt,{exact:!0,path:"/favorites",component:ut}),Object(b.jsx)(pt,{exact:!0,path:"/mymeals",component:jt}),Object(b.jsx)(pt,{exact:!0,path:"/mymeals/add",component:$e}),Object(b.jsx)(pt,{exact:!0,path:"/mymeals/:id/edit",component:Ye})]})})})]})},yt=a(72),Et=a(80),St={userSignin:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null}},kt=Object(yt.c)({mealList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0,meals:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $:return{loading:!0};case Y:return{loading:!1,meals:t.payload};case Z:return{loading:!1,error:t.payload};default:return e}},mealDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return{loading:!0};case te:return{loading:!1,meal:t.payload};case ae:return{loading:!1,error:t.payload};default:return e}},mealCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re:return{loading:!0};case ne:return{loading:!1,success:!0,meal:t.payload};case ce:return{loading:!1,error:t.payload};case se:return{};default:return e}},mealUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ie:return{loading:!0};case oe:return{loading:!1,success:!0};case de:return{loading:!1,error:t.payload};case le:return{};default:return e}},mealDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case je:return{loading:!0};case ue:return{loading:!1,success:!0};case be:return{loading:!1,error:t.payload};case he:return{};default:return e}},mealApprove:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pe:return{loading:!0};case Oe:return{loading:!1,success:!0};case me:return{loading:!1,error:t.payload};default:return e}},restaurantList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0,restaurants:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return{loading:!0};case S:return{loading:!1,restaurants:t.payload};case k:return{loading:!1,error:t.payload};default:return e}},restaurantDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return{loading:!0};case _:return{loading:!1,restaurant:t.payload};case A:return{loading:!1,error:t.payload};default:return e}},restaurantCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return{loading:!0};case R:return{loading:!1,success:!0,restaurant:t.payload};case C:return{loading:!1,error:t.payload};case I:return{};default:return e}},restaurantUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return{loading:!0};case F:return{loading:!1,success:!0};case U:return{loading:!1,error:t.payload};case z:return{};default:return e}},restaurantDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return{loading:!0};case N:return{loading:!1,success:!0};case P:return{loading:!1,error:t.payload};case B:return{};default:return e}},userSignin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case at:return{loading:!0};case rt:return{loading:!1,userInfo:t.payload};case nt:return{loading:!1,error:t.payload};case ct:return{};default:return e}},userRegister:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ze:return{loading:!0};case et:return{loading:!1,userInfo:t.payload};case tt:return{loading:!1,error:t.payload};default:return e}},userDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case st:return{loading:!0};case it:return{loading:!1,user:t.payload};case ot:return{loading:!1,error:t.payload};default:return e}},favoriteList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0,favorites:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ne:return{loading:!0};case Pe:return{loading:!1,favorites:t.payload};case Be:return{loading:!1,error:t.payload};default:return e}},favoriteCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Me:return{loading:!0};case Ve:return{loading:!1,success:!0,favorite:t.payload};case We:return{loading:!1,error:t.payload};default:return e}},favoriteDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qe:return{loading:!0};case Qe:return{loading:!1,success:!0};case Ge:return{loading:!1,error:t.payload};default:return e}}}),wt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||yt.d,_t=Object(yt.e)(kt,St,wt(Object(yt.a)(Et.a)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(137),a(138),a(71);s.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(l.a,{store:_t,children:Object(b.jsx)(gt,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},88:function(e,t,a){}},[[139,1,2]]]);
//# sourceMappingURL=main.b79d67f0.chunk.js.map